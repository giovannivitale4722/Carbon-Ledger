{
  "ServiceName": "carbon-ledger-api",
  "SourceConfiguration": {
    "ImageRepository": {
      "ImageIdentifier": "<AWS_ACCOUNT_ID>.dkr.ecr.us-east-1.amazonaws.com/carbon-ledger-api:latest",
      "ImageRepositoryType": "ECR",
      "ImageConfiguration": {
        "Port": "4000",
        "RuntimeEnvironmentSecrets": {
          "DATABASE_URL": "arn:aws:secretsmanager:us-east-1:<ACCOUNT_ID>:secret:carbon-ledger/database-url",
          "JWT_SECRET": "arn:aws:secretsmanager:us-east-1:<ACCOUNT_ID>:secret:carbon-ledger/jwt-secret"
        },
        "RuntimeEnvironmentVariables": {
          "NODE_ENV": "production",
          "PORT": "4000",
          "USE_LOCAL_EMISSION_DATA": "true"
        }
      }
    },
    "AutoDeploymentsEnabled": true
  },
  "InstanceConfiguration": {
    "Cpu": "1 vCPU",
    "Memory": "2 GB",
    "InstanceRoleArn": "<APP_RUNNER_INSTANCE_ROLE_ARN>"
  },
  "HealthCheckConfiguration": {
    "Protocol": "HTTP",
    "Path": "/health",
    "Interval": 10,
    "Timeout": 5,
    "HealthyThreshold": 1,
    "UnhealthyThreshold": 5
  },
  "NetworkConfiguration": {
    "EgressConfiguration": {
      "EgressType": "VPC",
      "VpcConnectorArn": "<VPC_CONNECTOR_ARN>"
    }
  }
}

